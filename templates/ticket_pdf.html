{% load static%}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Ticket</title>
    <link rel="stylesheet" href="{% static 'fonts/icomoon/style.css' %}">
    <link rel="shortcut icon" href="{% static 'images/title_logo.png' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">

    <link rel="stylesheet" href="{% static 'css/jquery.fancybox.min.css' %}">

    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}">

    <link rel="stylesheet" href="{% static 'fonts/flaticon/font/flaticon.css' %}">

    <link href="https://unpkg.com/aos@next/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <style>
        /* PDF-friendly styles using tables */
        body {
            font-family: sans-serif;
            background-color: #f0f0f0;
            /* So you can see the ticket shape */
        }

        /* * 1. The main layout: Replaces "display: flex"
            * This is a 1-row, 2-column table.
            */
        .ticket-table {
            width: 800px;
            /* Fixed width is better for PDFs */
            margin: 20px;
            background: #2e2e2e;
            border-radius: 15px;
            /* Note: border-radius may not work in all PDF renderers */
            color: white;
            border: 1px solid #444;
        }

        .ticket-main {
            padding: 30px;
            vertical-align: top;
            width: 550px;
            /* Give the main part a fixed width */
        }

        .ticket-header {
            border-bottom: 1px dashed #666;
            padding-bottom: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .ticket-header h2 {
            margin: 0;
            font-size: 1.8rem;
            color: #ee1e46;
            font-weight: bold;
        }

        .ticket-header p {
            margin: 5px 0 0;
            color: #ccc;
        }

        /* * 2. The teams layout: Replaces "display: flex"
            * This is a 1-row, 3-column table.
            */
        .ticket-teams-table {
            width: 100%;
            margin-bottom: 25px;
            text-align: center;
        }

        .ticket-teams-table .team {
            width: 40%;
            text-align: center;
        }

        .ticket-teams-table .vs {
            width: 20%;
            font-size: 2rem;
            font-weight: bold;
            color: #ee1e46;
            vertical-align: middle;
        }

        .ticket-teams-table img {
            width: 70px;
            height: 70px;
            /* object-fit: contain; */
            /* object-fit is not supported, but images should be sized ok */
        }

        .ticket-teams-table h5 {
            margin: 5px 0 0;
            font-size: 1rem;
        }

        /* * 3. The details layout: Replaces "display: grid"
            * This is a 3-row, 2-column table.
            */
        .ticket-details-table {
            width: 100%;
        }

        .ticket-details-table .detail-item {
            width: 50%;
            padding: 10px 0;
            vertical-align: top;
        }

        .detail-item h4 {
            font-size: 0.9rem;
            color: #aaa;
            margin: 0 0 5px;
            text-transform: uppercase;
        }

        .detail-item p {
            font-size: 1.1rem;
            margin: 0;
            font-weight: 500;
        }

        /* * 4. The stub layout: Replaces "display: flex"
            * This is the 2nd cell of the main table.
            */
        .ticket-stub {
            background: #1e1e1e;
            padding: 30px;
            width: 250px;
            /* Fixed width */
            border-left: 2px dashed #666;
            border-radius: 0 15px 15px 0;
            text-align: center;
            vertical-align: top;
        }

        /* * 5. The vertical text: Replaces "writing-mode"
            * writing-mode is NOT supported. We must make it horizontal.
            * This is a necessary compromise for a clean PDF.
            */
        .ticket-stub h3 {
            font-size: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #ee1e46;
            margin: 0 0 20px 0;
            /* Changed from vertical to horizontal */
            text-align: center;
        }

        .qr-code {
            width: 150px;
            height: 150px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            margin: 0 auto;
            /* Center the QR block */
        }

        .qr-code img {
            width: 100%;
            height: 100%;
        }

        .ticket-stub p {
            margin-top: 15px;
        }
    </style>
</head>

<body>
    <table class="ticket-table" border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td class="ticket-main">
                <div class="ticket-header">
                    <h2>{{ booking.match.match_name }}</h2>
                    <p>Official Match Ticket</p>
                </div>

                <table class="ticket-teams-table" border="0" cellpadding="0" cellspacing="0">
                    <tr>
                        <td class="team">
                            <img src="{{ base_url }}{{ booking.match.team1.timage.url }}" alt="">
                            <h5>{{ booking.match.team1.tname }}</h5>
                        </td>
                        <td class="vs">VS</td>
                        <td class="team">
                            <img src="{{ base_url }}{{ booking.match.team2.timage.url }}" alt="">
                            <h5>{{ booking.match.team2.tname }}</h5>
                        </td>
                    </tr>
                </table>

                <table class="ticket-details-table" border="0" cellpadding="0" cellspacing="0">
                    <tr>
                        <td class="detail-item">
                            <h4>Date & Time</h4>
                            <p>{{ booking.match.date|date:"F d, Y" }} - 7:30 PM</p>
                        </td>
                        <td class="detail-item">
                            <h4>Venue</h4>
                            <p>{{ booking.match.venue }}</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="detail-item">
                            <h4>Category / Stand</h4>
                            <p>{{ booking.category.name }}</p>
                        </td>
                        <td class="detail-item">
                            <h4>Seats</h4>
                            <p>{{ booking.quantity }}</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="detail-item">
                            <h4>Booked By</h4>
                            <p>{{ booking.user.get_full_name|default:booking.user.username }}</p>
                        </td>
                        <td class="detail-item">
                            <h4>Booking ID</h4>
                            <p>{{ booking.id }}</p>
                        </td>
                    </tr>
                </table>
            </td>

            <td class="ticket-stub">
                <h3>Admit One</h3>

                <div class="qr-code">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data={{ qr_data_url }}"
                        alt="QR Code">
                </div>

                <p><strong>ID:</strong> {{ booking.id }}</p>
            </td>
        </tr>
    </table>
</body>

</html>